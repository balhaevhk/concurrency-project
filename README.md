# üí∏ Payment System ‚Äî –í–µ—Ä—Å–∏—è 3

> ‚öôÔ∏è –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –Ω–∞ Go
> üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã, –∫–∞–Ω–∞–ª—ã –∏ `sync.WaitGroup` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –≤–µ—Ä—Å–∏—è –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —Å –ø–æ–º–æ—â—å—é **3 –≤–æ—Ä–∫–µ—Ä–æ–≤**.
–ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –∫–∞–Ω–∞–ª–∞ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –≠—Ç–æ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

---

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–∞–ª–∞–Ω—Å–æ–º
* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
* –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ (`chan`) –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–º–æ—â—å—é —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤ (3 –≥–æ—Ä—É—Ç–∏–Ω—ã)
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å—Ä–µ–¥—Å—Ç–≤, –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### `User`

```go
type User struct {
	ID      string
	Name    string
	Balance float64
}
```

### `Transaction`

```go
type Transaction struct {
	FromID string
	ToID   string
	Amount float64
}
```

### `PaymentSystem`

```go
type PaymentSystem struct {
	Users        map[string]User
	Transactions []Transaction
	mutex        sync.Mutex
}
```

---

## üîÅ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. –°–æ–∑–¥–∞—ë–º –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
2. –î–æ–±–∞–≤–ª—è–µ–º 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: –æ–¥–∏–Ω –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –¥—Ä—É–≥–æ–º—É.
3. –°–æ–∑–¥–∞—ë–º –∫–∞–Ω–∞–ª `chan Transaction`, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
4. –ó–∞–ø—É—Å–∫–∞–µ–º **3 –≤–æ—Ä–∫–µ—Ä–∞** (–≥–æ—Ä—É—Ç–∏–Ω—ã), –∫–∞–∂–¥—ã–π —á–∏—Ç–∞–µ—Ç –∏–∑ –∫–∞–Ω–∞–ª–∞ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.
5. –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª –∏ –¥–æ–∂–∏–¥–∞–µ–º—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é `sync.WaitGroup`.

---

## ‚ñ∂Ô∏è –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
–°–æ–∑–¥–∞—é UserID: 1 —Å –±–∞–ª–∞–Ω—Å–æ–º 1000
–°–æ–∑–¥–∞—é UserID: 2 —Å –±–∞–ª–∞–Ω—Å–æ–º 500
–ü–µ—Ä–µ–≤–æ–∂—É —Å UserID: 1 –Ω–∞ UserID: 2 —Å—É–º–º—É –≤ —Ä–∞–∑–º–µ—Ä–µ 200
–ü–µ—Ä–µ–≤–æ–∂—É —Å UserID: 2 –Ω–∞ UserID: 1 —Å—É–º–º—É –≤ —Ä–∞–∑–º–µ—Ä–µ 50
–ò—Ç–æ–≥–æ
John's Balance: 850
Petr's Balance: 650
–£ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è 850
–£ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è 650
```

---

## üìå –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* Go 1.20+
* `sync.Mutex`
* `sync.WaitGroup`
* `goroutine`
* `channel`

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
go run main.go
```
