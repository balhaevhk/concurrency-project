# Payment System - Version 2

Это вторая версия системы платежей, которая позволяет создавать пользователей, добавлять транзакции и обрабатывать их. В этой версии были добавлены возможности работы с несколькими пользователями и транзакциями, а также улучшена обработка ошибок.

## Описание

В этой версии проекта реализована система, которая моделирует процесс перевода денег между пользователями. Основные сущности — это пользователи и транзакции. Мы можем добавлять пользователей, создавать транзакции и обрабатывать их поочередно.

### Основные структуры данных:

* **User**: Структура, представляющая пользователя, содержит его уникальный идентификатор, имя и баланс.
* **Transaction**: Структура, представляющая транзакцию, содержит идентификаторы отправителя и получателя, а также сумму перевода.
* **PaymentSystem**: Структура, которая хранит пользователей и транзакции, а также методы для их добавления и обработки.

### Методы:

* **AddUser**: Добавляет пользователя в систему.
* **AddTransaction**: Добавляет транзакцию в очередь.
* **ProcessingTransactions**: Обрабатывает все транзакции, проверяет пользователей по их ID, снимает деньги с отправителя и зачисляет на счет получателя.

## Как запустить

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/balhaevhk/concurrency-project.git
   ```

2. Скомпилируйте и запустите проект:

   ```bash
   go run main.go
   ```

## Пример работы

После выполнения программы в консоли будет выведен результат, где пользователи совершат несколько транзакций, и их новые балансы будут отображены:

```bash
Создаю UserID: 1 с балансом 1000
Создаю UserID: 2 с балансом 500
Перевожу с UserID: 1 на UserID: 2 сумму в размере 200
Перевожу с UserID: 2 на UserID: 1 сумму в размере 50
Итого
John's Balance: 850
Petr's Balance: 650
```

## Структуры

### `User`

```go
type User struct {
    ID      string
    Name    string
    Balance float64
}
```

### `Transaction`

```go
type Transaction struct {
    FromID string
    ToID   string
    Amount float64
}
```

### `PaymentSystem`

```go
type PaymentSystem struct {
    Users        map[string]User
    Transactions []Transaction
}
```

## Ошибки

Если в процессе обработки транзакций возникают ошибки, например, недостаточно средств на счете пользователя или пользователь не найден, программа выведет соответствующие сообщения.

Пример ошибки:

```
error withdrawing from user 1: insufficient funds on balance
```
